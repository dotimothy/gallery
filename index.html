<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gallery Template</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üì∑</text></svg>">
    <link href='https://fonts.googleapis.com/css?family=Roboto:300,400,900' rel='stylesheet' type='text/css'>

    <!-- External Libs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <!-- App CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>

<body>

    <!-- UI Layer (Always on top) -->
    <div id="ui-layer">
        <!-- Loading Screen -->
        <div id="loading-screen">
            <div class="spinner"></div>
            <div id="loading-text">Loading Gallery... 0%</div>
            <div id="loading-bar-container">
                <div id="loading-bar"></div>
            </div>
            <div id="loading-stats" style="margin-top: 10px; color: #888; font-size: 0.9em; text-align: center;">
                <div id="loading-file">Initializing...</div>
                <div>
                    <span id="loading-data">0.00 MB</span> |
                    <span id="loading-speed">0 KB/s</span>
                </div>
            </div>
        </div>

        <h1 id="title"></h1>
        <div id="fps-counter"
            style="position: fixed; top: 10px; left: 10px; font-size: 0.8em; opacity: 0.7; z-index: 100; font-family: monospace;">
            FPS: 60</div>


        <!-- Toggle Switch -->
        <div id="top-controls">
            <button id="home" onclick="window.location.href='../index.html'">üè†</button>
            <button id="home" onclick="window.location.reload()">üîÑ</button>
            <button id="toggleSettings" title="Settings">‚öôÔ∏è</button>
            <button id="global-fullscreen" title="Go Fullscreen">‚õ∂</button>
            <button id="mode-toggle">3D</button>
        </div>

        <!-- Settings Modal -->
        <div id="settingsModal" class="hidden">
            <div class="settings-content">
                <div class="settings-header">
                    <h2>Gallery Settings</h2>
                    <button id="closeSettings">‚úñÔ∏è</button>
                </div>

                <div class="setting-group" id="group-3d">
                    <h3>3D Experience</h3>
                    <label>
                        <span>Resolution Quality</span>
                        <input type="range" id="set-resolution" min="0.25" max="3.0" step="0.25" value="1.0">
                        <span class="val-display" id="disp-resolution">1.0x</span>
                    </label>
                    <label>
                        <span>Sphere Scale</span>
                        <input type="range" id="set-sphere" min="1.0" max="15.0" step="0.5" value="2.0">
                        <span class="val-display" id="disp-sphere">2.0</span>
                    </label>
                    <label>
                        <span>Star Count</span>
                        <input type="range" id="set-particles" min="0" max="100000" step="1000" value="50000">
                        <span class="val-display" id="disp-particles">50000</span>
                    </label>
                </div>

                <div class="setting-group">
                    <h3>Slideshow</h3>
                    <label>
                        <span>Interval (sec)</span>
                        <input type="range" id="set-interval" min="1" max="10" step="0.5" value="3.0">
                        <span class="val-display" id="disp-interval">3.0s</span>
                    </label>
                </div>

                <div class="setting-group" id="group-2d">
                    <h3>2D Layout</h3>
                    <label>
                        <span>Images per Row</span>
                        <input type="range" id="set-grid" min="1" max="10" step="1" value="4">
                        <span class="val-display" id="disp-grid">4</span>
                    </label>
                </div>

                <div class="settings-footer">
                    <button id="resetSettings" class="btn-danger">Reset to Defaults</button>
                </div>
            </div>
        </div>

        <!-- Home / Footer -->
        <footer>
            <h2>¬© <a href="https://timothydo.me/photography" target="_blank">TheDoShoots</a> 2025. By Timothy Do. All
                Rights Reserved.</h2>
        </footer>
    </div>

    <!-- Navigation Hints / Arrows (Moved to root to ensure correct Z-Index stacking over viewer) -->
    <button id="leftArrow" class="nav-arrow">‚ùÆ</button>
    <button id="rightArrow" class="nav-arrow">‚ùØ</button>

    <!-- 3D View Container -->
    <div id="gallery-3d"></div>

    <!-- 2D View Container -->
    <div id="gallery-2d"></div>

    <!-- 2D Fullscreen Viewer Overlay (classic behavior) -->
    <div id="imageViewer" hidden>
        <!-- Controls Container -->
        <div id="viewer-controls">
            <button id="toggleThumbs" title="Toggle Palette">üñºÔ∏è</button>
            <button id="viewer-slideshow" title="Toggle Slideshow">‚ñ∂Ô∏è</button>
            <button id="toggleMetadata" title="Info">‚ÑπÔ∏è</button>
            <button id="zoomBtn" title="Zoom / Magnify">üîç</button>
            <button id="fullscreenToggle" title="Fullscreen">‚õ∂</button>
            <button id="exitViewer" title="Close">‚úñÔ∏è</button>
        </div>

        <div id="full-image-container"></div>
        <div id="thumbnail-selector" class="visible"></div>
    </div>

    <!-- Metadata Overlay (Moved to root for correct Z-index) -->
    <div id="metadataViewer" class="hidden"></div>

    <!-- Light Pollution Map Overlay (Iframe) -->
    <div id="lightPollutionMapOverlay">
        <div id="lightPollutionMapContainer">
            <iframe id="lightPollutionMapIframe" frameborder="0" scrolling="no"></iframe>
            <button id="lightPollutionMapCloseButton">‚úñÔ∏è</button>
        </div>
    </div>

    <!-- App JS -->
    <script type="module" src="js/app.js"></script>
</body>

</html>